"use strict";
// Copyright IBM Corp. 2017. All Rights Reserved.
// Node module: @loopback/core
// This file is licensed under the MIT License.
// License text available at https://opensource.org/licenses/MIT
Object.defineProperty(exports, "__esModule", { value: true });
// TODO(bajtos) Move this file to a standalone module, or find an existing
// npm module that we could use instead. Just make sure the existing
// module is using native utils.promisify() when available.
// tslint:disable:no-any
const util = require("util");
const nativePromisify = util.promisify;
function promisify(func) {
    if (nativePromisify)
        return nativePromisify(func);
    // The simplest implementation of Promisify
    return (...args) => {
        return new Promise((resolve, reject) => {
            try {
                func(...args, (err, result) => {
                    if (err)
                        reject(err);
                    else
                        resolve(result);
                });
            }
            catch (err) {
                reject(err);
            }
        });
    };
}
exports.promisify = promisify;
//# sourceMappingURL=promisify.js.map